# –°–∏—Å—Ç–µ–º–∞ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Docker Compose)

## üìù –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ Docker Compose –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–∞:

1.  **`web-app` (Go):** –ü—Ä–æ—Å—Ç–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ò–º–µ–µ—Ç –ø–æ–ª–∏—Ç–∏–∫—É `restart: always` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤.
2.  **`monitor-service` (Go):** –í—ã–ø–æ–ª–Ω—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ `/health` –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ —Å–±–æ—è—Ö.
3.  **`prometheus`:** –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–∞—Å—Å–∏–≤–Ω–æ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥.

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

* **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ Go, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "Hello World!" –∏ –∏–º–µ–µ—Ç `/health`.
* **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Go-—Å–∫—Ä–∏–ø—Ç (`monitor-service`) –∏ Prometheus.
* **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä Docker (`json-file`) –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π volume –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (`monitor_logs`).
* **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `docker compose up -d`.

## ‚öôÔ∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

  **–°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å:**
    ```bash
    docker compose up -d --build
    ```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
    ```bash
    curl localhost:8080
    # –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Hello World!
    ```

2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
    ```bash
    docker compose logs web-app
    ```

3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Go):**
    ```bash
    # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏–∑ volume
    docker compose logs monitor-service 
    # –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞-–ª–æ–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∞–º Go-—Å–∫—Ä–∏–ø—Ç
    # cat monitor_logs/monitor.log
    ```

4.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ Prometheus (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Docker):**
    - –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:9090`
    - –í –ø–æ–ª–µ "Expression" –≤–≤–µ–¥–∏—Ç–µ `up{job="hello-world-app"}`. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `1`, –∑–Ω–∞—á–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è Prometheus.

5.  **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:**
    ```bash
    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    docker compose stop web-app 
    
    # –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ Prometheus –∑–∞–º–µ—Ç—è—Ç —Å–±–æ–π.
    # –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ Docker (–∏–∑-–∑–∞ `restart: always`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç web-app, –µ—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ —Å–ª—É—á–∏—Ç—Å—è,
    ‚Ññ —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ —Å–∞–º, –≤—ã–∑–≤–∞–≤ bash —Å–∫—Ä–∏–ø—Ç
    
    docker compose ps # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ web-app —Å–Ω–æ–≤–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"
    ```
